<!doctype html>
<html lang="en" ng-app="YourApp">
<head>
<title>Toogle - The New Google</title>
<!-- 
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script> -->
<script src="js/angular/angular.js"></script>
<meta name="viewport"
	content="initial-scale=1, maximum-scale=1, user-scalable=no" />
<script src="js/angular-aria/angular-aria.js"></script>
<script src="js/angular-animate/angular-animate.js"></script>
<script src="js/hammerjs/hammer.js"></script>
<script src="js/angular-material/angular-material.js"></script>
<link rel="stylesheet" href="js/angular-material/angular-material.css">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="js/angular-material/themes/green-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/deep-orange-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/red-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/indigo-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/teal-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/grey-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/blue-grey-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/cyan-theme.css">
<link rel="stylesheet" href="js/angular-material/themes/light-blue-dark-theme.css">


<script>
	
</script>
<script type="text/javascript">
	function ContactController($scope, $http) {
		
	}
	function AppCtrl($scope, $http, $mdSidenav, $mdBottomSheet) {

		console.log('AppCtrl');
		$scope.data = {
			selectedIndex : 0,
			secondLocked : false,
			secondLabel : "Item Two"
		};

		$scope.user = {};
		$scope.theme = 'green'; 
		$scope.nonThemed ='#259b24';
		$scope.createUser = function() {
			$http({
				method : 'POST',
				url : 'http://localhost:8080/UB535p3WebApp/BasicIndexer',
				headers : {
					'Content-Type' : 'application/text',
					'q' : $scope.queryText
				},
				data : $scope.user
			}).success(function(data) {
				$scope.status = data;
				console.log (data);
			});
		};
		$scope.query = function() {
			$scope.cards = [];
			$http({
				method : 'POST',
				url : 'http://localhost:8080/UB535p3WebApp/BasicEvaluator',
				headers : {
					'Content-Type' : 'application/text',
					'q' : $scope.queryText
				},
				data : $scope.user
			}).success(function(data) {
				console.log (data);
				var resultCount = data.resultCount;
				var results = data.results;
				if (resultCount != 0) {
					for (var i = 0; i < results.length; i++){
						$scope.cards.push({
				        	title: results[i].title,
				        	content: results[i].content
				    	});
					}
				}
				$scope.announceSelected (2);
			});
		};
		
		$scope.next = function() {
			$scope.data.selectedIndex = Math.min($scope.data.selectedIndex + 1,
					2);
			console.log('next');
		};

		$scope.previous = function() {
			$scope.data.selectedIndex = Math.max($scope.data.selectedIndex - 1,
					0);
			console.log('previous');
		};

		$scope.announceSelected = function(tab) {
			console.log(tab);
			$scope.data.selectedIndex = tab;
			if (tab == 1){
				$scope.theme = 'teal'; 
				$scope.nonThemed = '#009688'
			} else if (tab == 2) {
				$scope.theme = 'cyan'; 
				$scope.nonThemed = '#00bcd4';
			} else {
				$scope.theme = 'indigo'; 
				$scope.nonThemed = '#3f51b5';
			}
		};

		$scope.changeUser = function() {
			$mdSidenav('right').toggle()
		};
		$scope.close = function() {
			$mdSidenav('right').toggle()
		};
		$scope.showArticle = function($event, $cardo) {
		    $scope.alert = '';
		    $mdBottomSheet.show({
		      templateUrl: 'viewArticle.html',
		      controller: 'viewArticleCtrl',
		      targetEvent: $event,
		      locals: { carda: $cardo }
		    }).then(function(clickedItem) {
		      $scope.alert = clickedItem.name + ' clicked!';
		    });
		  };
		$scope.cards = [
			            
	         ];
	}
	function viewArticleCtrl ($scope, $mdBottomSheet, carda) {
		$scope.card  = carda;
		  $scope.items = [
		    { name: 'Hangout', icon: 'hangout' },
		    { name: 'Mail', icon: 'mail' },
		    { name: 'Message', icon: 'message' },
		    { name: 'Copy', icon: 'copy' },
		    { name: 'Facebook', icon: 'facebook' },
		    { name: 'Twitter', icon: 'twitter' },
		  ];

		  $scope.listItemClick = function($index) {
		    var clickedItem = $scope.items[$index];
		    $mdBottomSheet.hide(clickedItem);
		  };
		}
</script>
</head>
<body ng-controller="AppCtrl" >
	<script>
		// Include app dependency on ngMataerial

		var app = angular.module('YourApp', [ 'ngMaterial' ]);

		app.controller("ContactController", ContactController);
		app.controller("AppCtrl", AppCtrl);
		app.controller("viewArticleCtrl", viewArticleCtrl);
		
	</script>
	<div layout="vertical" layout-fill style="height:100%;">
		<md-toolbar md-theme-watch="true" md-theme="{{theme}}" >

		<div class="md-toolbar-tools">
			<md-text-float label="Enter query" ng-model="queryText" class="long" md-theme-watch="true" md-theme="{{theme}}" ></md-text-float>

			<md-button ng-click="query ()">Search</md-button>
			<!-- fill up the space between left and right area -->
			<span flex></span>

			<md-button ng-click="createUser ()">Index</md-button>
			<md-button ng-click="changeUser ()">Change User</md-button>
		</div>

		</md-toolbar>
		<md-content style="height:100%;background-color:#eaeaea;" md-theme="teal">
		<div class="tabsdemoStaticTabs" style="height:100%;">
			<div style="height:100%;">
	<div ng-style="{'background-color' : nonThemed }">
				<md-tabs selected="data.selectedIndex" left md-theme-watch="true" md-theme="{{theme}}" style="width:40%; min-width:400px;"> 
					<md-tab
						id="tab1" num="1" aria-controls="tab1-content"
						ng-click="announceSelected(0)" > 
							Top News 
						</md-tab> 
					<md-tab
						id="tab2" aria-controls="tab2-content"
						ng-click="announceSelected(1)">
							Personalised Results 
					</md-tab> 
					<md-tab id="tab3" aria-controls="tab3-content"
							ng-click="announceSelected(2)"> 
						Search Results 
					</md-tab> 
				</md-tabs>
			</div>
				<ng-switch on="data.selectedIndex"	 style="height:100%;">

				<div role="tabpanel" id="tab2-content" aria-labelledby="tab2"
					ng-switch-when="1" md-swipe-left="next()"
					md-swipe-right="previous()">
				
				</div>
								<div role="tabpanel" id="tab3-content" aria-labelledby="tab2"
					ng-switch-when="2" md-swipe-left="next()"
					md-swipe-right="previous()">
	
	<md-card ng-repeat="card in cards" md-theme-watch="true" style="background-color:white; margin:14px;"
		ng-click="showArticle($event, card)">
	<div>
      <p style="font-weight:300; font-size:24px; line-height:0.5;padding-left:15px;">{{card.title}}</p>
      <p style="font-weight:300; font-size:14px;padding-left:15px;">
        	{{card.content}}
      </p>
      <div style="overflow:hidden"><p style="float:left; width:100px;padding-left:15px;">LIKE</p></div>
      </div>
    </md-card>
    

  				</div>
				</ng-switch>

<!-- 				<div class="after-tabs-area" layout="vertical"
					layout-sm="horizontal" layout-padding layout-align="left center">

					<md-text-float type="number" label="Selected Index"
						ng-model="data.selectedIndex"></md-text-float>
					<div flex></div>
					<span>Item Two: </span>
					<md-checkbox ng-model="data.secondLocked" aria-label="Disabled">
					Disabled </md-checkbox>

				</div> -->
			</div>
		</div>


		</md-content>
    <md-sidenav class="md-sidenav-right md-whiteframe-z2" component_id="right" md-theme="blue-grey">

      <md-toolbar class="md-theme-light">
        <h1 class="md-toolbar-tools">CHOOSE USER</h1>
      </md-toolbar>
        <p style="padding-left:15px;"><md-button ng-click="changeUser1 ()" class="md-primary" >
          Aniket
        </md-button></p>
       <p style="padding-left:15px;"><md-button ng-click="changeUser1 ()" class="md-primary" >
          Hari
        </md-button></p>
        <p style="padding-left:15px;"><md-button ng-click="changeUser1 ()" class="md-primary" >
          PNandi
        </md-button></p>
        <p style="padding-left:15px;"><md-button ng-click="changeUser1 ()" class="md-primary" >
          Kumar
        </md-button></p>
        <p style="padding-left:15px;padding-top:100px;"><md-button ng-click="close ()" class="md-primary" >
          Close
        </md-button></p>

    </md-sidenav>
	</div>

</body>
</html>